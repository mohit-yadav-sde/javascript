<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Virtual Art Gallery</title>
<style>
    body { margin: 0; overflow: hidden; }
    #overlay {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(255, 255, 255, 0.7);
        padding: 10px;
        border-radius: 5px;
    }
    #artInfo {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: white;
        padding: 10px;
        display: none;
    }
    #themeSelector { margin-top: 10px; }
</style>
</head>
<body>
<div id="overlay">
    <h3>Instructions</h3>
    <p>Use WASD to move, mouse to look, click to teleport. Press 'E' for info.</p>
    <input type="url" id="artUrl1" placeholder="Artwork URL 1">
    <input type="text" id="artTitle1" placeholder="Title 1">
    <!-- Repeat for 2 more artworks -->
    <button onclick="setupArtwork()">Add Artworks</button>
    <select id="themeSelector">
        <option value="modern">Modern</option>
        <option value="classic">Classic</option>
        <option value="abstract">Abstract</option>
    </select>
</div>
<div id="artInfo"></div>
<canvas id="galleryCanvas"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/Tween.min.js"></script>
<script>
// Three.js setup
let scene, camera, renderer, controls, raycaster, artworks = [];

function init() {
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('galleryCanvas') });
    renderer.setSize(window.innerWidth, window.innerHeight);

    // Basic room setup
    const geometry = new THREE.BoxGeometry(100, 50, 100);
    const material = new THREE.MeshStandardMaterial({ color: 0x808080, side: THREE.BackSide });
    const room = new THREE.Mesh(geometry, material);
    scene.add(room);

    // Lights
    const light = new THREE.AmbientLight(0x404040, 5); // soft white light
    scene.add(light);

    // Controls
    controls = new THREE.PointerLockControls(camera, document.body);
    scene.add(controls.getObject());

    raycaster = new THREE.Raycaster();

    // Event listeners for movement, click, etc.
    document.addEventListener('click', onClick);
    document.addEventListener('keydown', onKeyDown);
    window.addEventListener('resize', onWindowResize);

    animate();
}

function setupArtwork() {
    for(let i = 1; i <= 3; i++) {
        const url = document.getElementById(`artUrl${i}`).value;
        const title = document.getElementById(`artTitle${i}`).value;
        if(url && title) {
            const texture = new THREE.TextureLoader().load(url);
            const artMaterial = new THREE.MeshBasicMaterial({ map: texture });
            const artGeometry = new THREE.PlaneGeometry(10, 10);
            const art = new THREE.Mesh(artGeometry, artMaterial);
            art.position.set((i-2)*15, 10, -45); // Position artworks on walls
            art.userData = { title: title, info: 'Some info about the artwork' }; // Add custom data
            scene.add(art);
            artworks.push(art);
        }
    }
}

function onKeyDown(event) {
    if(event.key === 'e') {
        document.getElementById('artInfo').style.display = 
            document.getElementById('artInfo').style.display === 'block' ? 'none' : 'block';
    }
}

function onClick(event) {
    raycaster.setFromCamera({ x: 0, y: 0 }, camera);
    const intersects = raycaster.intersectObjects(scene.children);
    if (intersects.length > 0) {
        if (intersects[0].object.userData.title) {
            const info = document.getElementById('artInfo');
            info.innerHTML = `<h4>${intersects[0].object.userData.title}</h4><p>${intersects[0].object.userData.info}</p>`;
        } else {
            // Teleportation logic with tween
            new TWEEN.Tween(controls.getObject().position)
                .to({ x: intersects[0].point.x, y: camera.position.y, z: intersects[0].point.z }, 500)
                .easing(TWEEN.Easing.Quadratic.Out)
                .start();
        }
    }
}

function animate() {
    requestAnimationFrame(animate);
    TWEEN.update();
    controls.update();
    renderer.render(scene, camera);
}

function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

init();
</script>
</body>
</html>