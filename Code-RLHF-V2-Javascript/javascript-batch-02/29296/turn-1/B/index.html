<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Virtual Art Gallery</title>
    <style>
        body { margin: 0; overflow: hidden; }
        #overlay, #startScreen { position: absolute; width: 100%; height: 100%; background: rgba(0,0,0,0.7); color: white; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        #artInfo { display: none; }
        form { background: #fff; padding: 20px; color: #000; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <div id="startScreen">
        <h1>Welcome to the Virtual Art Gallery</h1>
        <form id="artForm">
            <!-- Form fields for artwork details and theme selection -->
        </form>
        <button onclick="startGallery()">Enter Gallery</button>
    </div>
    <div id="overlay">
        <div id="artInfo"></div>
    </div>
    <script>
    let scene, camera, renderer, controls, raycaster, mouse;
    let currentTheme = 'Modern';
    
    function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Controls setup
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.25;
        controls.rotateSpeed = 0.35;

        // Raycaster for interaction
        raycaster = new THREE.Raycaster();
        mouse = new THREE.Vector2();

        // Initial setup of gallery
        setupGallery(currentTheme);

        // Event listeners for interaction
        window.addEventListener('click', onMouseClick, false);
        window.addEventListener('resize', onWindowResize, false);
        document.addEventListener('keydown', onDocumentKeyDown, false);
    }

    function setupGallery(theme) {
        // Implement theme-specific settings (textures, lighting, etc.)
        let floorMaterial = new THREE.MeshStandardMaterial({ color: theme === 'Modern' ? 0xaaaaaa : 0x654321 });
        let floorGeometry = new THREE.PlaneGeometry(20, 20);
        let floor = new THREE.Mesh(floorGeometry, floorMaterial);
        floor.rotation.x = -Math.PI / 2;
        scene.add(floor);

        // Add lights, walls, etc., based on theme
        // Example: directional light for shadows
        let light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(0, 5, 2);
        light.castShadow = true;
        scene.add(light);
    }

    function onMouseClick(event) {
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
        raycaster.setFromCamera(mouse, camera);

        // Check for intersections with floor for teleportation or with artworks
        let intersects = raycaster.intersectObjects(scene.children);
        if (intersects.length > 0) {
            if (intersects[0].object.userData.isArt) {
                // Show art info
                document.getElementById('artInfo').style.display = 'block';
                // Populate with art data
            } else {
                // Teleport to clicked position
                new TWEEN.Tween(camera.position).to({x: intersects[0].point.x, y: camera.position.y, z: intersects[0].point.z}, 1000).easing(TWEEN.Easing.Quadratic.InOut).start();
            }
        }
    }

    function onDocumentKeyDown(event) {
        if (event.key === 'e' || event.key === 'E') {
            // Toggle art info overlay
            let artInfo = document.getElementById('artInfo');
            artInfo.style.display = artInfo.style.display === 'block' ? 'none' : 'block';
        }
    }

    function startGallery() {
        document.getElementById('startScreen').style.display = 'none';
        init();
        animate();
    }

    function animate() {
        requestAnimationFrame(animate);
        TWEEN.update();
        controls.update();
        renderer.render(scene, camera);
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }

    // Call init when ready to start
    </script>
</body>
</html>