<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Knife Thrower</title>
<style>
    canvas { background: #f0f0f0; display: block; margin: 0 auto; }
    #gameOver, #startScreen {
        position: absolute; 
        top: 50%; 
        left: 50%; 
        transform: translate(-50%, -50%);
        text-align: center;
        background: white;
        padding: 20px;
        border: 2px solid black;
        display: none;
    }
</style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<div id="startScreen">
    <h1>Knife Thrower</h1>
    <p>Throw 10 knives at the spinning wheel without hitting any!</p>
    <p>Press <b>Space</b> to throw. <b>Good Luck!</b></p>
    <button onclick="startGame()">Start Game</button>
</div>
<div id="gameOver">
    <h1>Game Over</h1>
    <p>Score: <span id="score">0</span></p>
    <button onclick="location.reload()">Retry</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const startScreen = document.getElementById('startScreen');
const gameOverScreen = document.getElementById('gameOver');
const scoreDisplay = document.getElementById('score');

let wheelRadius = 150;
let wheelSpeed = 0.01;
let knives = [];
let angle = 0;
let gameState = 'start';
let score = 0;

function startGame() {
    startScreen.style.display = 'none';
    gameState = 'playing';
    knives = [];
    score = 0;
    requestAnimationFrame(gameLoop);
}

function drawWheel() {
    ctx.save();
    ctx.translate(canvas.width / 2, canvas.height / 2);
    ctx.rotate(angle);
    ctx.beginPath();
    ctx.arc(0, 0, wheelRadius, 0, Math.PI * 2);
    ctx.stroke();
    for(let i = 0; i < 10; i++) {
        ctx.moveTo(0, 0);
        ctx.lineTo(0, -wheelRadius);
        ctx.rotate(Math.PI * 2 / 10);
    }
    ctx.stroke();
    ctx.restore();
}

function drawKnife(knife) {
    ctx.fillRect(canvas.width / 2 - 5, knife.y, 10, 20);
}

function throwKnife() {
    if(gameState === 'playing') {
        knives.push({y: 0, angle: angle});
        score++;
    }
}

function checkCollision() {
    for(let i = 0; i < knives.length; i++) {
        for(let j = i + 1; j < knives.length; j++) {
            if(Math.abs(knives[i].angle - knives[j].angle) < 0.1) {  // Simple angle collision
                gameState = 'gameover';
                return true;
            }
        }
    }
    return false;
}

function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    if(gameState === 'playing') {
        angle += wheelSpeed;
        drawWheel();
        
        for(let knife of knives) {
            knife.y += 5; // Knife speed
            drawKnife(knife);
            if(knife.y > canvas.height + 20) {
                gameState = 'gameover'; // Knife went out of bounds
            }
        }
        
        if(checkCollision()) {
            scoreDisplay.textContent = score - 1; // -1 because we incremented before checking
            gameOverScreen.style.display = 'block';
        }
    }

    if(gameState !== 'gameover') requestAnimationFrame(gameLoop);
}

document.addEventListener('keydown', function(event) {
    if(event.code === 'Space') {
        throwKnife();
    }
});

</script>
</body>
</html>